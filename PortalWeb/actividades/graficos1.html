<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>Gráficos</title>
  </head>
  <body>
    <h2>Representación gráfica</h2>
    <div id="mostrar">
      <img
        id="img1"
        src="img/grafico/pipxel.png"
        width="0px"
        height="50px"
      />
      <span id="span1"></span>
      <br />
      <img
        id="img2"
        src="img/grafico/pipxel.png"
        width="0px"
        height="50px"
      />
      <span id="span2"></span>
      <br />
      <img
        id="img3"
        src="img/grafico/pipxel.png"
        width="0px"
        height="50px"
      />
      <span id="span3"></span>
      <br />
      <hr />
      <div id="cajaBotones">
        <button id="btn1">VOTAR 1</button>
        <button id="btn2">VOTAR 2</button>
        <button id="btn3">VOTAR 3</button>
        <button id="btnReset">RESET</button>
      </div>
    </div>

    <script>
      let img1 = document.querySelector("#img1");
      let img2 = document.querySelector("#img2");
      let img3 = document.querySelector("#img3");
      let span1 = document.querySelector("#span1");
      let span2 = document.querySelector("#span2");
      let span3 = document.querySelector("#span3");

      let cajaVotos = document.querySelector("#cajaBotones");
      let voto1 = document.querySelector("#btn1");
      let voto2 = document.querySelector("#btn2");
      let voto3 = document.querySelector("#btn3");
      let reset = document.querySelector("#btnReset");

      const grafico1 = [0, 0, 0];

      cajaVotos.addEventListener("click", (e) => {
        //console.log(e.target.id);
        let btnId = e.target.id;
        switch (btnId) {
          case "btn1":
            grafico1[0]++;
            printGraphic();
            break;
          case "btn2":
            grafico1[1]++;
            printGraphic();
            break;
          case "btn3":
            grafico1[2]++;
            printGraphic();
            break;
          case "btnReset":
            resetGraphic();
            break;
        }
      });

      function printGraphic() {
        let total = grafico1[0] + grafico1[1] + grafico1[2];
        let valor1 = (grafico1[0] * 100) / (total / 15);
        let valor2 = (grafico1[1] * 100) / (total / 15);
        let valor3 = (grafico1[2] * 100) / (total / 15);

        span1.innerHTML = (valor1 / 15).toFixed(1) + "%";
        span2.innerHTML = (valor2 / 15).toFixed(1) + "%";
        span3.innerHTML = (valor3 / 15).toFixed(1) + "%";

        img1.style.width = valor1 + "px";
        img2.style.width = valor2 + "px";
        img3.style.width = valor3 + "px";
      }

      function resetGraphic() {
        img1.style.width = "0px";
        img2.style.width = "0px";
        img3.style.width = "0px";

        span1.innerHTML = "0.0%";
        span2.innerHTML = "0.0%";
        span3.innerHTML = "0.0%";
      }
    </script>
  </body>
</html>
